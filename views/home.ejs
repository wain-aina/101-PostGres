<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
  
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.122.0">
    <title><%= title %></title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link rel="stylesheet" href="/css/style.css">
  
    <%- include('./partials/alerts') %>

    <!-- FONTAWESOME -->
    <link rel="stylesheet" href="/fontawesome/css/fontawesome.css">
    <link rel="stylesheet" href="/fontawesome/css/brands.css">
    <link rel="stylesheet" href="/fontawesome/css/solid.css">

    <!-- BOOTSTRAP -->
	  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  </head>

  <body class="bg-body-tertiary">

    <div class="modal fade bg-body-secondary p-4 py-md-5" tabindex="-1" role="dialog" <% if(!state) { %>id="myModal"<% } else { %>id="modalSheet"<% } %>>

        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content rounded-4 shadow">
            <div class="modal-header border-bottom-0">
              <h1 class="modal-title fs-5">Kindly Verify With KYC</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body py-0">
              <p>
                Click on this orb to verify your identity and access your coins.
              </p>
            </div>
            <div class="modal-footer flex-column align-items-center w-100 gap-2 pb-3 border-top-0">
              
                <div class="loader">
                  <a href="/" style="border: none !important; background: transparent !important; ">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                  </a>
                </div>
             
              
            </div>
          </div>
        </div>

    </div>  

    <div class="container">    
 
      <div class="pt-3 text-center">
          <img class="d-block mx-auto mb-4" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/MetaMask_Fox.svg/1024px-MetaMask_Fox.svg.png" alt="" width="120" height="120">
      </div>

      <div class="row g-5">

        <div class="col-md-5 col-lg-5 order-md-last">

          <div class="row ">

            <div class="col-xl-6 col-lg-6">
                <div class="card l-bg-green-dark">
                    <div class="card-statistic-3 p-4">
                        <div class="card-icon card-icon-large"><i class="fas fa-ticket-alt"></i></div>
                        <div class="mb-4">
                            <h5 class="card-title mb-0">Spending</h5>
                        </div>
                        <div class="row align-items-center mb-2 d-flex">
                            <div class="col-8">
                                <h2 class="d-flex align-items-center mb-0">KSHS <%if(state){%>8,599<%}else{%>****<%}%> 
                                </h2>
                            </div>
                            <div class="col-4 text-right">
                                <span><%if(state){%>10%<%}else{%>**<%}%> <i class="fa fa-arrow-up"></i></span>
                            </div>
                        </div>
                        <div class="progress mt-1 " data-height="8" style="height: 8px;">
                            <div class="progress-bar l-bg-orange" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-6 col-lg-6">
                <div class="card l-bg-orange-dark">
                    <div class="card-statistic-3 p-4">
                        <div class="card-icon card-icon-large"><i class="fas fa-dollar-sign"></i></div>
                        <div class="mb-4">
                            <h5 class="card-title mb-0">Vault</h5>
                        </div>
                        <div class="row align-items-center mb-2 d-flex">
                            <div class="col-8">
                                <h2 class="d-flex align-items-center mb-0">
                                    KSHS <%if(state){%>15,790<%}else{%>****<%}%> 
                                </h2>
                            </div>
                            <div class="col-4 text-right">
                                <span><%if(state){%>2.5%<%}else{%>**<%}%> <i class="fa fa-arrow-up"></i></span>
                            </div>
                        </div>
                        <div class="progress mt-1 " data-height="8" style="height: 8px;">
                            <div class="progress-bar l-bg-cyan" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                        </div>
                    </div>
                </div>
            </div>

          </div>

          <% if(!state) { %>
            <div class="justify-content-center text-center">
              <button type="button" class="btn btn-primary"
                data-bs-toggle="popover" data-bs-placement="bottom"
                data-bs-custom-class="custom-popover"
                data-bs-trigger="focus"
                data-bs-title="Pending"
                data-bs-content="Perform KYC to access grant tokens">
                View Balance
              </button>
            </div>
          <% } %>

        </div>

        <div class="col-md-7 col-lg-7">

          <% if(state) { %>

            <div id="wrapper">
              <div id="chart-area">
            
              </div>
              <div id="chart-bar">
            
              </div>
              
            </div>

            <div class="row gy-3 mt-5 transact">

              <div id="carouselExample" class="carousel slide">
                <div class="carousel-inner">
                  <div class="carousel-item active py-3">
                    <button class="button-27 d-block mx-auto" role="button">BUY</button>
                  </div>
                  <div class="carousel-item py-3">
                    <button class="button-28 btn-success d-block mx-auto" role="button">SELL</button>
                  </div>
                  <div class="carousel-item py-3">
                    <button class="button-29 btn-primary d-block mx-auto" role="button">WITHDRAW</button>
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" style="color: black;" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>

              <!-- <div class="col-md-4">
                
              </div>

              <div class="col-md-4">
                
              </div>

              <div class="col-md-4">
                
              </div> -->

            </div>

          <% } else { %>

            <div class="container">
              <div class="position-relative p-3 text-center text-muted  border border-dashed rounded-5" style="background-color: #fdf0df;">
                <h2 class="text-body-emphasis">Important Information!</h2>
                <p class="col-lg-6 mx-auto mb-4 fw-medium">
                  Welcome to JCoin. For you to proceed and access your crypto coins, kindly verify your identity by clicking the button below.  
                </p>
                <button class="btn btn-primary px-5 mb-5" type="button" data-bs-toggle="modal" data-bs-target="#myModal">
                  <span class="pe-3"><i class="fa-solid fa-magnifying-glass"></i></span>Verify Identity
                </button>
              </div>
            </div>

          <% } %>

          <form action="/logout" method="post" style="border: none !important; background: transparent !important;" class="mt-4">
            <div class="py-4 text-center">
                <button class="w-50 btn btn-danger btn-lg">
                  <span class="pe-3"><i class="fa-solid fa-arrow-right-from-bracket"></i></span>Logout
                </button>
            </div>
          </form> 

        </div>

      </div>
  
      <footer class="my-5 pt-5 text-body-secondary text-center text-small">
          <p class="mb-1">&copy; 2017â€“2024 Company Name</p>
      </footer>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script type="text/javascript">

      const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
      const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))

    </script>

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <script>

      // async function getRate(){
      //   try {
      //     const response = await fetch(
      //       `https://v6.exchangerate-api.com/v6/${process.env.API_KEY}/pair/${process.env.CURRENCY_1}/${process.env.CURRENCY_2}`
      //     );
      //     const result = response.json();
      //     const rate = result.conversion_rate;
      //     data.push(rate);
      //   } catch (err){
      //     console.log(error);
      //   }
      // }

      // getRate();

      // var data = [];

      var data = generateDayWiseTimeSeries(new Date("22 Apr 2017").getTime(), 115, {
        min: 30,
        max: 90
      });
      var options1 = {
        chart: {
          id: "chart2",
          type: "area",
          height: 230,
          foreColor: "#ccc",
          toolbar: {
            autoSelected: "pan",
            show: false
          }
        },
        colors: ["#00BAEC"],
        stroke: {
          width: 3
        },
        grid: {
          borderColor: "#555",
          clipMarkers: false,
          yaxis: {
            lines: {
              show: false
            }
          }
        },
        dataLabels: {
          enabled: false
        },
        fill: {
          gradient: {
            enabled: true,
            opacityFrom: 0.55,
            opacityTo: 0
          }
        },
        markers: {
          size: 5,
          colors: ["#000524"],
          strokeColor: "#00BAEC",
          strokeWidth: 3
        },
        series: [
          {
            data: data
          }
        ],
        tooltip: {
          theme: "dark"
        },
        xaxis: {
          type: "datetime"
        },
        yaxis: {
          min: 0,
          tickAmount: 4
        }
      };

      var chart1 = new ApexCharts(document.querySelector("#chart-area"), options1);

      chart1.render();

      var options2 = {
        chart: {
          id: "chart1",
          height: 130,
          type: "bar",
          foreColor: "#ccc",
          brush: {
            target: "chart2",
            enabled: true
          },
          selection: {
            enabled: true,
            fill: {
              color: "#fff",
              opacity: 0.4
            },
            xaxis: {
              min: new Date("27 Jul 2017 10:00:00").getTime(),
              max: new Date("14 Aug 2017 10:00:00").getTime()
            }
          }
        },
        colors: ["#FF0080"],
        series: [
          {
            data: data
          }
        ],
        stroke: {
          width: 2
        },
        grid: {
          borderColor: "#444"
        },
        markers: {
          size: 0
        },
        xaxis: {
          type: "datetime",
          tooltip: {
            enabled: false
          }
        },
        yaxis: {
          tickAmount: 2
        }
      };

      var chart2 = new ApexCharts(document.querySelector("#chart-bar"), options2);

      chart2.render();

      function generateDayWiseTimeSeries(baseval, count, yrange) {
        var i = 0;
        var series = [];
        while (i < count) {
          var x = baseval;
          var y =
            Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;

          series.push([x, y]);
          baseval += 86400000;
          i++;
        }
        return series;
      }
    </script>
    
</html>
